import 'package:directus_api_manager/directus_api_manager.dart';
import 'package:vr_web_admin/page/listexplointant_viewmode.dart';
import 'package:vr_web_admin/models/user_detail.dart';

//@DirectusCollection()
//@CollectionMetadata(endpointName: "users_details")
class ExploitantUseCases extends DirectusItem implements IExploitantUseCases {
  final DirectusApiManager _apiManager;

  ExploitantUseCases(this._apiManager) : super.newItem();

  // @override
  // Future<String?> getRS(String? id) async {
  //   String idReal = id.toString();

  //   final UsersDetails oneManager = await _apiManager.getSpecificItem(id: "1");
  //   return oneManager.identification;
  // }

  @override
  Future<String?> getRS(DirectusUser? currentUser) async {
    final List<UsersDetails> listUser;
    try {
      listUser = List<UsersDetails>.from(
          await _apiManager.findListOfItems<UsersDetails>());
      final Iterable<UsersDetails> filteredID = listUser
          .where((listUser) => listUser.identification == currentUser!.id);
      return filteredID.first.rs;
    } catch (exe) {
      print(exe);
      throw false;
    }
  }
}
